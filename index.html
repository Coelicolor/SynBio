<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ThaiSyn Bio Grand Challenge 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .hero-bg {
            background-color: #1a202c;
            background-image:
                radial-gradient(at 47% 33%, hsl(162.00, 77%, 40%) 0, transparent 59%),
                radial-gradient(at 82% 65%, hsl(240.00, 84%, 59%) 0, transparent 55%);
        }
        .glassmorphism {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-900 text-white">

    <!-- App Container -->
    <div id="app" class="min-h-screen flex flex-col">

        <!-- Header -->
        <header class="bg-gray-900/80 backdrop-blur-sm sticky top-0 z-50">
            <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
                <a href="#" class="text-2xl font-bold text-white" onclick="navigateTo('home')">
                    ThaiSynBio GC 2025
                </a>
                <div class="hidden md:flex items-center space-x-6">
                    <a href="#" class="hover:text-cyan-400 transition-colors" onclick="navigateTo('home')">Home</a>
                    <a href="#" class="hover:text-cyan-400 transition-colors" onclick="navigateTo('about')">About</a>
                    <a href="#" class="hover:text-cyan-400 transition-colors" onclick="navigateTo('timeline')">Timeline</a>
                    <a href="#" class="hover:text-cyan-400 transition-colors" onclick="navigateTo('sponsors')">Sponsors</a>
                    <a href="#" class="bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-2 px-4 rounded-full transition-colors" onclick="navigateTo('register')">Register Now</a>
                </div>
                <button id="mobile-menu-button" class="md:hidden text-white focus:outline-none">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </nav>
            <!-- Mobile Menu -->
            <div id="mobile-menu" class="hidden md:hidden px-6 pb-4">
                <a href="#" class="block py-2 hover:text-cyan-400" onclick="navigateTo('home')">Home</a>
                <a href="#" class="block py-2 hover:text-cyan-400" onclick="navigateTo('about')">About</a>
                <a href="#" class="block py-2 hover:text-cyan-400" onclick="navigateTo('timeline')">Timeline</a>
                <a href="#" class="block py-2 hover:text-cyan-400" onclick="navigateTo('sponsors')">Sponsors</a>
                <a href="#" class="block mt-2 bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-2 px-4 rounded-full transition-colors text-center" onclick="navigateTo('register')">Register Now</a>
            </div>
        </header>

        <!-- Main Content: This is where pages will be rendered -->
        <main id="main-content" class="container mx-auto px-6 py-12 flex-grow">
            <!-- Content will be injected by JavaScript -->
        </main>

        <!-- Footer -->
        <footer class="bg-gray-800/50">
            <div class="container mx-auto px-6 py-8 text-center text-gray-400">
                <div class="flex justify-center space-x-6 mb-4">
                    <a href="#" class="hover:text-white">Twitter</a>
                    <a href="#" class="hover:text-white">LinkedIn</a>
                    <a href="#" class="hover:text-white">GitHub</a>
                </div>
                <p>&copy; 2025 ThaiSyn Bio Grand Challenge. All rights reserved.</p>
                <p class="text-sm mt-2">Hosted on GitHub Pages</p>
            </div>
        </footer>

    </div>

    <!-- Page Templates -->
    <template id="home-page">
        <div class="hero-bg rounded-lg p-8 md:p-16 text-center animate-fade-in">
            <h1 class="text-4xl md:text-6xl font-extrabold mb-4 leading-tight">ThaiSyn Bio Grand Challenge 2025</h1>
            <p class="text-lg md:text-2xl text-cyan-300 mb-8 max-w-3xl mx-auto">Innovating for a Healthier Future: A National Challenge in Synthetic Biology</p>
            <div class="flex flex-col sm:flex-row justify-center items-center space-y-4 sm:space-y-0 sm:space-x-4">
                 <button class="w-full sm:w-auto bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-3 px-8 rounded-full transition-transform transform hover:scale-105" onclick="navigateTo('register')">Join the Challenge</button>
                 <button class="w-full sm:w-auto bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-8 rounded-full transition-transform transform hover:scale-105" onclick="navigateTo('login')">Attendee Login</button>
            </div>
        </div>
        <div class="mt-16 text-center">
             <h2 class="text-3xl font-bold mb-2">The Future is Engineered with Biology</h2>
             <p class="max-w-4xl mx-auto text-gray-300">Join researchers, students, and innovators from across Thailand to address pressing national health challenges using the power of synthetic biology. Together, we can design and build novel biological systems to create a sustainable and healthier future for all.</p>
        </div>
    </template>

    <template id="about-page">
        <div class="animate-fade-in">
            <h1 class="text-4xl font-bold text-center mb-12">About the Challenge</h1>
            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div>
                    <h2 class="text-3xl font-bold text-cyan-400 mb-4">Our Mission</h2>
                    <p class="text-gray-300 mb-4">
                        The ThaiSyn Bio Grand Challenge is a national initiative to catalyze innovation in synthetic biology to solve Thailand's most critical health and environmental problems. We aim to foster collaboration, cultivate talent, and accelerate the transition of cutting-edge research from the lab to real-world impact.
                    </p>
                     <p class="text-gray-300">
                        This competition invites multidisciplinary teams to design, build, and test novel biological circuits and systems. We believe that by bringing together the brightest minds, we can unlock the potential of synthetic biology to create a better tomorrow.
                    </p>
                </div>
                <div class="glassmorphism p-8 rounded-lg">
                     <img src="https://placehold.co/500x300/1a202c/ffffff?text=ThaiSynBio+Lab" alt="Synthetic Biology Lab" class="rounded-lg shadow-2xl" onerror="this.onerror=null;this.src='https://placehold.co/500x300/1a202c/ffffff?text=Image+Error';">
                </div>
            </div>
        </div>
    </template>
    
    <template id="timeline-page">
        <div class="animate-fade-in">
            <h1 class="text-4xl font-bold text-center mb-12">Competition Timeline</h1>
            <div class="max-w-2xl mx-auto">
                <div class="relative border-l-2 border-cyan-500 pl-6">
                    <!-- Timeline Items -->
                    <div class="mb-10 relative">
                        <div class="absolute -left-[34px] top-1 w-4 h-4 bg-cyan-500 rounded-full border-4 border-gray-900"></div>
                        <p class="font-bold text-lg text-cyan-300">August 1, 2024</p>
                        <p class="text-xl font-semibold">Registration Opens</p>
                        <p class="text-gray-400">Teams can officially register for the challenge.</p>
                    </div>
                     <div class="mb-10 relative">
                        <div class="absolute -left-[34px] top-1 w-4 h-4 bg-cyan-500 rounded-full border-4 border-gray-900"></div>
                        <p class="font-bold text-lg text-cyan-300">October 31, 2024</p>
                        <p class="text-xl font-semibold">Registration Closes</p>
                        <p class="text-gray-400">Final day for team registrations.</p>
                    </div>
                     <div class="mb-10 relative">
                        <div class="absolute -left-[34px] top-1 w-4 h-4 bg-cyan-500 rounded-full border-4 border-gray-900"></div>
                        <p class="font-bold text-lg text-cyan-300">February 15, 2025</p>
                        <p class="text-xl font-semibold">Project Proposal Deadline</p>
                        <p class="text-gray-400">Submission of detailed project proposals.</p>
                    </div>
                    <div class="mb-10 relative">
                        <div class="absolute -left-[34px] top-1 w-4 h-4 bg-cyan-500 rounded-full border-4 border-gray-900"></div>
                        <p class="font-bold text-lg text-cyan-300">June 1, 2025</p>
                        <p class="text-xl font-semibold">Sequence Upload Deadline</p>
                        <p class="text-gray-400">Final day for submitting genetic sequences.</p>
                    </div>
                     <div class="mb-10 relative">
                        <div class="absolute -left-[34px] top-1 w-4 h-4 bg-cyan-500 rounded-full border-4 border-gray-900"></div>
                        <p class="font-bold text-lg text-cyan-300">August 20-22, 2025</p>
                        <p class="text-xl font-semibold">Grand Finale & Jamboree</p>
                        <p class="text-gray-400">Teams present their work and winners are announced.</p>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <template id="sponsors-page">
         <div class="animate-fade-in text-center">
            <h1 class="text-4xl font-bold mb-12">Our Valued Sponsors</h1>
            <p class="max-w-3xl mx-auto text-gray-300 mb-12">This event is made possible by the generous support of our sponsors, who are committed to advancing science and technology in Thailand.</p>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8 items-center">
                <div class="glassmorphism p-6 rounded-lg"><img src="https://placehold.co/200x100/ffffff/1a202c?text=Sponsor+1" alt="Sponsor 1" class="mx-auto" onerror="this.onerror=null;this.src='https://placehold.co/200x100/ffffff/1a202c?text=Sponsor+1';"></div>
                <div class="glassmorphism p-6 rounded-lg"><img src="https://placehold.co/200x100/ffffff/1a202c?text=Sponsor+2" alt="Sponsor 2" class="mx-auto" onerror="this.onerror=null;this.src='https://placehold.co/200x100/ffffff/1a202c?text=Sponsor+2';"></div>
                <div class="glassmorphism p-6 rounded-lg"><img src="https://placehold.co/200x100/ffffff/1a202c?text=Sponsor+3" alt="Sponsor 3" class="mx-auto" onerror="this.onerror=null;this.src='https://placehold.co/200x100/ffffff/1a202c?text=Sponsor+3';"></div>
                <div class="glassmorphism p-6 rounded-lg"><img src="https://placehold.co/200x100/ffffff/1a202c?text=Sponsor+4" alt="Sponsor 4" class="mx-auto" onerror="this.onerror=null;this.src='https://placehold.co/200x100/ffffff/1a202c?text=Sponsor+4';"></div>
            </div>
        </div>
    </template>

    <template id="register-page">
        <div class="max-w-lg mx-auto glassmorphism p-8 rounded-lg animate-fade-in">
            <h1 class="text-3xl font-bold text-center mb-6">Register for the Challenge</h1>
            <form id="registration-form" novalidate>
                <div class="mb-4">
                    <label for="team-name" class="block mb-2 text-sm font-medium">Team Name</label>
                    <input type="text" id="team-name" name="teamName" class="w-full bg-gray-700 border border-gray-600 text-white rounded-lg p-2.5 focus:ring-cyan-500 focus:border-cyan-500" required>
                </div>
                <div class="mb-4">
                    <label for="email" class="block mb-2 text-sm font-medium">Contact Email</label>
                    <input type="email" id="email" name="email" class="w-full bg-gray-700 border border-gray-600 text-white rounded-lg p-2.5 focus:ring-cyan-500 focus:border-cyan-500" required>
                </div>
                 <div class="mb-4">
                    <label for="affiliation" class="block mb-2 text-sm font-medium">University / Institution</label>
                    <input type="text" id="affiliation" name="affiliation" class="w-full bg-gray-700 border border-gray-600 text-white rounded-lg p-2.5 focus:ring-cyan-500 focus:border-cyan-500" required>
                </div>
                <div class="mb-6">
                    <label for="password" class="block mb-2 text-sm font-medium">Create Password</label>
                    <input type="password" id="password" name="password" class="w-full bg-gray-700 border border-gray-600 text-white rounded-lg p-2.5 focus:ring-cyan-500 focus:border-cyan-500" required>
                </div>
                <button type="submit" id="register-button" class="w-full bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-3 rounded-lg transition-colors">Register Team</button>
            </form>
            <p id="registration-message" class="text-center mt-4"></p>
        </div>
    </template>

    <template id="login-page">
        <div class="max-w-md mx-auto glassmorphism p-8 rounded-lg animate-fade-in">
            <h1 class="text-3xl font-bold text-center mb-6">Attendee Login</h1>
            <form id="login-form">
                <div class="mb-4">
                    <label for="login-email" class="block mb-2 text-sm font-medium">Email</label>
                    <input type="email" id="login-email" class="w-full bg-gray-700 border border-gray-600 text-white rounded-lg p-2.5 focus:ring-cyan-500 focus:border-cyan-500" required>
                </div>
                <div class="mb-6">
                    <label for="login-password" class="block mb-2 text-sm font-medium">Password</label>
                    <input type="password" id="login-password" class="w-full bg-gray-700 border border-gray-600 text-white rounded-lg p-2.5 focus:ring-cyan-500 focus:border-cyan-500" required>
                </div>
                <button type="submit" class="w-full bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-3 rounded-lg transition-colors">Log In</button>
            </form>
            <p id="login-message" class="text-center mt-4 text-red-400"></p>
        </div>
    </template>
    
    <template id="upload-page">
        <div class="max-w-2xl mx-auto glassmorphism p-8 rounded-lg animate-fade-in">
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-3xl font-bold">Upload Sequences</h1>
                <button id="logout-button" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-full transition-colors">Logout</button>
            </div>
            <p class="mb-4 text-gray-300">Welcome, <span id="user-team-name" class="font-bold text-cyan-300"></span>! Upload your sequences in FASTA format.</p>
            
            <div id="drop-zone" class="border-2 border-dashed border-gray-500 rounded-lg p-10 text-center cursor-pointer hover:border-cyan-400 hover:bg-gray-800/50 transition-colors">
                 <p class="text-gray-400">Drag & drop your .fasta file here, or click to select a file.</p>
                 <input type="file" id="file-input" class="hidden" accept=".fasta,.fa">
            </div>
            <div id="file-info" class="mt-4 text-center"></div>
            <div id="upload-progress-container" class="w-full bg-gray-700 rounded-full h-2.5 mt-4 hidden">
                <div id="upload-progress-bar" class="bg-cyan-500 h-2.5 rounded-full" style="width: 0%"></div>
            </div>
            <button id="upload-button" class="w-full mt-6 bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-3 rounded-lg transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed" disabled>Upload File</button>
            <p id="upload-message" class="text-center mt-4"></p>
        </div>
    </template>

    <script>
        // --- Google Sheets Integration ---
        // 1. Create a new Google Sheet.
        // 2. Go to Extensions -> Apps Script.
        // 3. Paste the following code into the script editor and save it.
        //    (Note the corrections from the previous version)
        /*
            function doPost(e) {
              try {
                // IMPORTANT: Your specific Sheet ID has been added below.
                var doc = SpreadsheetApp.openById("1nUrADjz3L3jKRrZy-4fKls15DcdbwB0Qy69MpKH24v8"); 
                // IMPORTANT: Make sure you have a sheet named "Registrations"
                var sheet = doc.getSheetByName("Registrations"); 
                
                // Create headers if the sheet is empty
                if (sheet.getLastRow() === 0) {
                  // The header names (e.g., "teamName") MUST exactly match the keys sent from the client-side JavaScript.
                  sheet.appendRow(["Timestamp", "teamName", "email", "affiliation", "passwordHash"]); 
                }
                
                var headers = sheet.getRange(1, 1, 1, sheet.getLastColumn()).getValues()[0];
                var newRow = headers.map(function(header) {
                  // e.parameter keys are case-sensitive and match the 'name' attribute from the form/FormData.
                  return header === "Timestamp" ? new Date() : e.parameter[header];
                });
                
                sheet.appendRow(newRow);
                
                return ContentService
                  .createTextOutput(JSON.stringify({ "result": "success", "row": sheet.getLastRow() }))
                  .setMimeType(ContentService.MimeType.JSON);
              } catch (err) {
                // Return a more detailed error message for easier debugging.
                return ContentService
                  .createTextOutput(JSON.stringify({ "result": "error", "error": { "message": err.message, "stack": err.stack } }))
                  .setMimeType(ContentService.MimeType.JSON);
              }
            }
        */
        // 4. Click Deploy -> New deployment.
        // 5. Select "Web app" as the type.
        // 6. In the configuration:
        //    - Execute as: "Me"
        //    - Who has access: "Anyone"
        // 7. Click "Deploy".
        // 8. Authorize the script.
        // 9. Copy the Web app URL and paste it below.

        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwvyFD-vJXGMgkuCT37wLOIPdEAhYbDFOPYT0nkisspzZPyimhzNz1-0j-yvdJdBsJj9A/exec'; // <-- Your Script URL has been updated.

        // --- SPA (Single Page Application) Logic ---
        const mainContent = document.getElementById('main-content');

        function navigateTo(page) {
            history.pushState({ page }, `${page}`, `#${page}`);
            renderPage(page);
            document.getElementById('mobile-menu').classList.add('hidden');
        }

        function renderPage(page) {
            mainContent.innerHTML = '';
            let templateId = `${page}-page`;
            const template = document.getElementById(templateId);
            
            if (template) {
                mainContent.appendChild(template.content.cloneNode(true));
                addEventListenersForPage(page);
            } else {
                 mainContent.appendChild(document.getElementById('home-page').content.cloneNode(true));
                 addEventListenersForPage('home');
            }
        }

        function addEventListenersForPage(page) {
             if (page === 'register') {
                document.getElementById('registration-form').addEventListener('submit', handleRegistration);
            } else if (page === 'login') {
                document.getElementById('login-form').addEventListener('submit', handleLogin);
            } else if (page === 'upload') {
                setupUploadPage();
            }
        }
        
        let currentUser = null;

        function handleLogin(event) {
            event.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            const messageEl = document.getElementById('login-message');

            const storedUser = localStorage.getItem(`user_${email}`);
            
            if (storedUser) {
                const userData = JSON.parse(storedUser);
                if (userData.password === password) {
                    currentUser = userData;
                    navigateTo('upload');
                } else {
                    messageEl.textContent = "Invalid password.";
                }
            } else {
                messageEl.textContent = "No user found with that email.";
            }
        }

        function handleLogout() {
            currentUser = null;
            navigateTo('home');
        }

        function setupUploadPage() {
            if (!currentUser) {
                navigateTo('login');
                return;
            }
            document.getElementById('user-team-name').textContent = currentUser.teamName;
            document.getElementById('logout-button').addEventListener('click', handleLogout);

            const dropZone = document.getElementById('drop-zone');
            const fileInput = document.getElementById('file-input');
            const fileInfo = document.getElementById('file-info');
            const uploadButton = document.getElementById('upload-button');
            let selectedFile = null;

            dropZone.addEventListener('click', () => fileInput.click());
            dropZone.addEventListener('dragover', (e) => { e.preventDefault(); dropZone.classList.add('border-cyan-400', 'bg-gray-800/50'); });
            dropZone.addEventListener('dragleave', () => { dropZone.classList.remove('border-cyan-400', 'bg-gray-800/50'); });
            dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZone.classList.remove('border-cyan-400', 'bg-gray-800/50');
                if (e.dataTransfer.files.length) handleFile(e.dataTransfer.files[0]);
            });
            fileInput.addEventListener('change', (e) => { if(e.target.files.length) handleFile(e.target.files[0]); });

            function handleFile(file) {
                 if(file && file.name.match(/\.(fasta|fa)$/i)) {
                    selectedFile = file;
                    fileInfo.textContent = `File selected: ${file.name} (${(file.size / 1024).toFixed(2)} KB)`;
                    uploadButton.disabled = false;
                 } else {
                    selectedFile = null;
                    fileInfo.textContent = 'Invalid file type. Please select a .fasta or .fa file.';
                    uploadButton.disabled = true;
                 }
            }

            uploadButton.addEventListener('click', () => {
                if (!selectedFile) return;
                const progressBar = document.getElementById('upload-progress-bar');
                const progressContainer = document.getElementById('upload-progress-container');
                const uploadMessage = document.getElementById('upload-message');

                progressContainer.style.display = 'block';
                uploadMessage.textContent = 'Uploading...';
                uploadMessage.className = 'text-center mt-4';
                uploadButton.disabled = true;

                let progress = 0;
                const interval = setInterval(() => {
                    progress += 10;
                    progressBar.style.width = progress + '%';
                    if (progress >= 100) {
                        clearInterval(interval);
                         uploadMessage.textContent = `Successfully uploaded ${selectedFile.name}!`;
                         uploadMessage.classList.add('text-green-400');
                         setTimeout(() => {
                             uploadMessage.textContent = '';
                             uploadMessage.classList.remove('text-green-400');
                             fileInfo.textContent = '';
                             selectedFile = null;
                             uploadButton.disabled = true;
                             progressContainer.style.display = 'none';
                             progressBar.style.width = '0%';
                         }, 5000);
                    }
                }, 200);
            });
        }
        
        async function handleRegistration(event) {
            event.preventDefault();
            const form = event.target;
            const button = document.getElementById('register-button');
            const messageEl = document.getElementById('registration-message');

            button.disabled = true;
            button.textContent = 'Submitting...';
            messageEl.className = 'text-center mt-4'; // Reset classes

            const originalFormData = new FormData(form);
            const data = Object.fromEntries(originalFormData.entries());

            // Reconstruct FormData for submission to ensure we send the hashed password
            const submissionFormData = new FormData();
            submissionFormData.append('teamName', data.teamName);
            submissionFormData.append('email', data.email);
            submissionFormData.append('affiliation', data.affiliation);
            // "Hash" the password (btoa is not secure, for demo only).
            submissionFormData.append('passwordHash', btoa(data.password));

            try {
                if (GOOGLE_SCRIPT_URL === 'YOUR_GOOGLE_APPS_SCRIPT_URL') {
                    throw new Error("Google Apps Script URL is not configured.");
                }

                const response = await fetch(GOOGLE_SCRIPT_URL, {
                    method: 'POST',
                    body: submissionFormData,
                });
                
                if (!response.ok) {
                    throw new Error(`Network error: ${response.status} ${response.statusText}`);
                }

                const result = await response.json();

                if (result.result === 'success') {
                    messageEl.textContent = 'Registration successful! You can now log in.';
                    messageEl.classList.add('text-green-400');
                    const userDataForStorage = {
                        teamName: data.teamName,
                        email: data.email,
                        affiliation: data.affiliation,
                        password: data.password
                    };
                    localStorage.setItem(`user_${data.email}`, JSON.stringify(userDataForStorage));
                    form.reset();
                } else {
                    // The error from Apps Script might be an object. Stringify for better message.
                    const errorDetail = (typeof result.error === 'object' && result.error !== null) 
                        ? result.error.message || JSON.stringify(result.error) 
                        : result.error;
                    throw new Error(errorDetail || 'An unknown error occurred from the server.');
                }
            } catch (error) {
                 messageEl.textContent = `Registration failed. ${error.message}`;
                 messageEl.classList.add('text-red-400');
                 console.error("Registration Error:", error);
            } finally {
                button.disabled = false;
                button.textContent = 'Register Team';
            }
        }
        
        document.getElementById('mobile-menu-button').addEventListener('click', () => {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        });

        window.addEventListener('popstate', (event) => {
             renderPage(event.state ? event.state.page : 'home');
        });

        const initialPage = window.location.hash.substring(1) || 'home';
        navigateTo(initialPage);
    </script>
</body>
</html>
